<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SpecialKEval: SevenEval Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SpecialKEval&#160;<span id="projectnumber">1.3</span></div>
   <div id="projectbrief">7-card Texas Hold'em hand evaluator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>SevenEval Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="SevenEval" -->
<p><code>#import &lt;<a class="el" href="_seven_eval_8h_source.html">SevenEval.h</a>&gt;</code></p>

<p><a href="class_seven_eval-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(short)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_seven_eval.html#adb715050eb8cd8f64c6b9323d125a06a">getRankOfSeven:::::::</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_seven_eval.html">SevenEval</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_seven_eval.html#a436a0a5a4921d0ed778514a2b4599c34">theEvaluator</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_seven_eval.html#ae94b87189c2dfc5a79e08d82a67c23f5">releaseTheEvaluator</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="_seven_eval_8h.html">SevenEval.h</a><br/>
 SpecialKEval </p>
<p>Copyright 2010 Kenneth J. Shackleton<br/>
 <a href="mailto:codingfeedback@gmail.com">codingfeedback@gmail.com</a><br/>
 <a href="http://specialk-coding.blogspot.com/">http://specialk-coding.blogspot.com/</a> </p>
<p><em>An evolution of this evaluator has been released under Apple's EULA and is behind the app <a href="http://itunes.apple.com/us/app/poker-ace/id392530020?mt=8&amp;ls=1">Poker Ace</a> available through iTunes Store.</em></p>
<p>This program gives you software freedom; you can copy, convey, propagate, redistribute and/or modify this program under the terms of the GNU General Public License (GPL) as published by the Free Software Foundation (FSF), either version 3 of the License, or (at your option) any later version of the GPL published by the FSF. </p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. </p>
<p>You should have received a copy of the GNU <a href="http://www.gnu.org/licenses/">General Public License</a> along with this program in a file in the toplevel directory called "GPLv3". </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Kenneth J. Shackleton </dd></dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="adb715050eb8cd8f64c6b9323d125a06a"></a><!-- doxytag: member="SevenEval::getRankOfSeven:::::::" ref="adb715050eb8cd8f64c6b9323d125a06a" args="(const int CARD1,[] const int CARD2,[] const int CARD3,[] const int CARD4,[] const int CARD5,[] const int CARD6,[] const int CARD7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (short) getRankOfSeven: </td>
          <td></td>
          <td class="paramtype">(const int)&#160;</td>
          <td class="paramname"><em>CARD1</em></td>
        </tr>
        <tr>
          <td class="paramkey">:</td>
          <td></td>
          <td class="paramtype">(const int)&#160;</td>
          <td class="paramname"><em>CARD2</em></td>
        </tr>
        <tr>
          <td class="paramkey">:</td>
          <td></td>
          <td class="paramtype">(const int)&#160;</td>
          <td class="paramname"><em>CARD3</em></td>
        </tr>
        <tr>
          <td class="paramkey">:</td>
          <td></td>
          <td class="paramtype">(const int)&#160;</td>
          <td class="paramname"><em>CARD4</em></td>
        </tr>
        <tr>
          <td class="paramkey">:</td>
          <td></td>
          <td class="paramtype">(const int)&#160;</td>
          <td class="paramname"><em>CARD5</em></td>
        </tr>
        <tr>
          <td class="paramkey">:</td>
          <td></td>
          <td class="paramtype">(const int)&#160;</td>
          <td class="paramname"><em>CARD6</em></td>
        </tr>
        <tr>
          <td class="paramkey">:</td>
          <td></td>
          <td class="paramtype">(const int)&#160;</td>
          <td class="paramname"><em>CARD7</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call this method to assign a rank to a 7-card hand. Each card is an integer from 0 (Ace of Spades), 1 (Ace of Hearts) to 51 (Two of Clubs). For performance reasons this method does nothing to verify that the input is a valid hand, the responsibility for this rests entirely with the caller. The ranks are all positive, and the highest rank is 7462. The set of all 7-card ranks is not an interval from 1: the worst 7-card poker hand has a rank of 49. Still, the higher the rank the stronger the hand, and two hands of equal rank always draw. Valid hands, i.e. 7-tuples of pairwise distinct integers from 0 to 51 inclusive, don't need to be sorted. </p>
<p>It's helpful to think of the ranks as living on an interval which has been mapped onto a circle whose circumference is this constant, like thread round a cotton wheel. The circumference is chosen so that no two ranks overlap. This trick cuts the RAM cost by 40%, to 9MB, with negligible cost in performance. </p>
<p>The method now works as follows. First, it looks up a pre-calculated 32-bit integer card key for each of the seven parameters and adds these all together to generate a <em>hand key</em>. It then breaks up the hand key in two pieces, one a 23-bit integer (the <em>face key</em>) and the other a 9-bit integer (the <em>flush check key</em>) using bitshifts and masks. We look up the value in the flushCheck array placed (flush check key)th. This value is either a suit value, the suit of the flush in the event the suit is a flush of some kind, or a common non-suit value otherwise. </p>
<p>Usually, about 97% of the time, the hand does not contain a flush. If the hand is not a flush we replace the face key with its value modulo the circumference constant. We look up the entry in the rankArray whose index is this new face key. The value we find is is exactly the rank, in the event the hand is not a flush. Otherwise, if the hand is a flush, we form a new <em>flush key</em> for the hand (the sum of five, six or seven non-zero integers). We look up the value positioned (flush key)th in the flushRankArray. This is the rank of the hand, in the event it's a flush. </p>
<p>Typically this method will return the rank of a valid 7-card hand with no more than 6 additions. </p>
<p>When applying this to equity calculations we recommend taking the method as a block of code and developing it into a custom method. This saves method calls which, while not costly individually, accumulate to appreciably hamper performance. Specific applications also often have their own combinatorics which you can exploit. </p>

</div>
</div>
<a class="anchor" id="ae94b87189c2dfc5a79e08d82a67c23f5"></a><!-- doxytag: member="SevenEval::releaseTheEvaluator" ref="ae94b87189c2dfc5a79e08d82a67c23f5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (void) releaseTheEvaluator </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call to release the singleton instance. </p>

</div>
</div>
<a class="anchor" id="a436a0a5a4921d0ed778514a2b4599c34"></a><!-- doxytag: member="SevenEval::theEvaluator" ref="a436a0a5a4921d0ed778514a2b4599c34" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="interface_seven_eval.html">SevenEval</a> *) theEvaluator </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Singleton instance accessor; always use this rather than creating your own instance. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_seven_eval_8h_source.html">SevenEval.h</a></li>
<li><a class="el" href="_seven_eval_8m.html">SevenEval.m</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat Mar 5 2011 18:28:21 for SpecialKEval by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
